var K=Object.defineProperty;var Z=(v,f,m)=>f in v?K(v,f,{enumerable:!0,configurable:!0,writable:!0,value:m}):v[f]=m;var w=(v,f,m)=>Z(v,typeof f!="symbol"?f+"":f,m);import{c5 as U,c6 as x,f as ee,X as g,c7 as oe,c8 as te,c9 as se,d as le,Q as A,ab as ae,a0 as re,y as ne,g as ue,i as p,o as i,j as s,T as R,k as h,x as e,s as u,t,F as N,l as D,D as d,e as L,ah as T,q as ie,ca as ce,cb as pe,cc as he,_ as _e,al as S,be as de,bf as fe}from"./confirm-7ll00Bc9.js";import{E as Ce,C as me}from"./ErrorMessage-DBx_I8IT.js";import{u as ve,a as O,T as C,b as I,H as G}from"./HorizontalSelector-B-WZlDlh.js";import{I as ye}from"./InfoMessage-DilJSC6G.js";class ge{constructor(){w(this,"_reactive");w(this,"_currentProfileURI",U);w(this,"_customProfileList",x());this._reactive=ee(this)}get reactive(){return this._reactive}get currentProfileURI(){return this._currentProfileURI}get customLayoutProfiles(){return this._customProfileList.profiles}selectProfile(f){this._currentProfileURI=f,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}addCustomProfile(f){const m=oe(this._customProfileList,f);this._currentProfileURI=m,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}duplicateCustomProfile(f){const m=te(this._customProfileList,f);m&&(this._currentProfileURI=m,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList))}removeCustomProfile(f){se(this._customProfileList,f),this._currentProfileURI=U,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}updateCustomProfile(f,m){for(let P=0;P<this._customProfileList.profiles.length;P++)if(this._customProfileList.profiles[P].uri===f){this._customProfileList.profiles[P]=m,this._currentProfileURI=f;break}g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}async setup(){[this._currentProfileURI,this._customProfileList]=await g.loadLayoutProfileList()}}function Pe(){return new ge().reactive}let B;function F(){return B||(B=Pe()),B}const be={class:"main full column"},ke={class:"header column"},we=["value"],Le=["value"],Ie=["value"],Re={class:"row wrap buttons"},Te={key:0,class:"custom-profile column grow scroll"},Be={class:"row"},Ue=["value"],Se={class:"row"},Ae=["value"],Ee={class:"row"},Me={value:"Board"},Ne={value:"Record"},De={value:"Book"},Oe={value:"Chart"},Ge={value:"Analytics"},Fe={value:"Comment"},We={value:"RecordInfo"},ze={value:"ControlGroup1"},He={value:"ControlGroup2"},qe={class:"name"},Ve={key:0},Ye={key:1},Xe={key:2},je={key:3},Qe={key:4},$e={key:5},Je={key:6},Ke={key:7},Ze={key:8},xe={class:"property"},eo={class:"key"},oo=["value","onInput"],to={class:"property"},so={class:"key"},lo=["value","onInput"],ao={class:"property"},ro={class:"key"},no=["value","onInput"],uo={class:"property"},io={class:"key"},co=["value","onInput"],po={key:0},ho={class:"property"},_o={class:"property"},fo={key:1},Co={class:"property"},mo={class:"property"},vo={class:"property"},yo={class:"property"},go={key:2},Po={class:"property"},bo={class:"property"},ko={key:3},wo={class:"property"},Lo={class:"property"},Io={class:"property"},Ro={class:"property"},To={class:"property"},Bo={class:"property"},Uo={class:"property"},So={class:"property"},Ao={class:"property"},Eo={key:4},Mo={class:"property"},No=["onClick"],Do=["onClick"],Oo=["onClick"],Go=le({__name:"LayoutManager",setup(v){const f=A(),m=ve(),P=ae(),E=re(),c=F(),M=ne(),y=ue(()=>c.customLayoutProfiles.find(n=>n.uri===c.currentProfileURI)),W=n=>{const a=n.target;c.selectProfile(a.value)},z=()=>{c.addCustomProfile()},H=()=>{c.duplicateCustomProfile(c.currentProfileURI)},q=()=>{c.currentProfileURI.startsWith(ce)&&E.show({message:t.areYouSureWantToRemoveCurrentProfile,onOk:()=>{c.removeCustomProfile(c.currentProfileURI)}})},b=()=>c.customLayoutProfiles.find(n=>n.uri===c.currentProfileURI),V=()=>{const n=b();if(n){const a=pe(n);navigator.clipboard.writeText(a),m.enqueue({text:t.profileExportedToClipboard})}},Y=async()=>{try{const n=await navigator.clipboard.readText(),a=he(n);c.addCustomProfile(a),m.enqueue({text:t.profileImported})}catch{P.add(new Error(t.failedToImportProfile))}},k=(n,a)=>{const o=b();o&&c.updateCustomProfile(c.currentProfileURI,{...o,[n]:a})},_=(n,a,o)=>{const r=b();r&&c.updateCustomProfile(c.currentProfileURI,{...r,components:r.components.map((l,J)=>J!==n?l:{...l,[a]:o})})},X=n=>{const a=b();if(!a||n<=0)return;const o=[...a.components],r=o[n-1];o[n-1]=o[n],o[n]=r,c.updateCustomProfile(c.currentProfileURI,{...a,components:o})},j=n=>{const a=b();if(!a||n>=a.components.length-1)return;const o=[...a.components],r=o[n+1];o[n+1]=o[n],o[n]=r,c.updateCustomProfile(c.currentProfileURI,{...a,components:o})},Q=n=>{const a=b();a&&c.updateCustomProfile(c.currentProfileURI,{...a,components:a.components.filter((o,r)=>r!==n)})},$=()=>{const n=b();if(!n)return;const a=[...n.components],o=M.value.value;switch(o){case"Board":a.unshift({type:o,left:0,top:0,width:800,height:600});break;case"Record":a.unshift({type:"Record",left:0,top:0,width:400,height:500});break;case"Book":a.unshift({type:"Book",left:0,top:0,width:500,height:250});break;case"Chart":a.unshift({type:"Chart",left:0,top:0,width:600,height:300,chartType:T.RAW});break;case"Analytics":a.unshift({type:"Analytics",left:0,top:0,width:600,height:300});break;case"Comment":a.unshift({type:o,left:0,top:0,width:250,height:250});break;case"RecordInfo":a.unshift({type:o,left:0,top:0,width:400,height:300});break;case"ControlGroup1":case"ControlGroup2":a.unshift({type:o,left:0,top:0,width:150,height:200});break}c.updateCustomProfile(c.currentProfileURI,{...n,components:a})};return(n,a)=>(i(),p("div",{class:ie(["root full",e(f).thema])},[s("div",be,[s("div",ke,[s("select",{value:e(c).currentProfileURI,onChange:W},[s("option",{value:U},u(e(t).standard),9,Le),(i(!0),p(N,null,D(e(c).customLayoutProfiles,(o,r)=>(i(),p("option",{key:r,value:o.uri},u(o.name),9,Ie))),128))],40,we),s("div",Re,[s("button",{class:"thin",onClick:z},u(e(t).addCustomLayoutProfile),1),y.value?(i(),p("button",{key:0,class:"thin",onClick:H},u(e(t).duplicateCurrentProfile),1)):h("",!0),y.value?(i(),p("button",{key:1,class:"thin",onClick:q},u(e(t).removeCurrentProfile),1)):h("",!0),y.value?(i(),p("button",{key:2,class:"thin",onClick:V},u(e(t).exportProfileToClipboard),1)):h("",!0),s("button",{class:"thin",onClick:Y},u(e(t).importProfileFromClipboard),1)])]),y.value?(i(),p("div",Te,[s("div",Be,[s("input",{class:"profile-name",value:y.value.name,onInput:a[0]||(a[0]=o=>k("name",e(O)(o)))},null,40,Ue)]),s("div",Se,[d(C,{class:"color-toggle",value:!!y.value.backgroundColor,label:e(t).backgroundColor,onChange:a[1]||(a[1]=o=>k("backgroundColor",o?"#000000":void 0))},null,8,["value","label"]),y.value.backgroundColor?(i(),p("input",{key:0,class:"color-selector",type:"color",value:y.value.backgroundColor,onInput:a[2]||(a[2]=o=>k("backgroundColor",e(O)(o)))},null,40,Ae)):h("",!0),d(C,{class:"backdrop-toggle",value:!!y.value.dialogBackdrop,label:e(t).dialogBackdrop,onChange:a[3]||(a[3]=o=>k("dialogBackdrop",o))},null,8,["value","label"])]),s("div",Ee,[s("select",{ref_key:"newComponentType",ref:M,size:"1"},[s("option",Me,u(e(t).board),1),s("option",Ne,u(e(t).record),1),s("option",De,u(e(t).book),1),s("option",Oe,u(e(t).chart),1),s("option",Ge,u(e(t).analytics),1),s("option",Fe,u(e(t).comments),1),s("option",We,u(e(t).recordProperties),1),s("option",ze,u(e(t).controlGroup)+"1",1),s("option",He,u(e(t).controlGroup)+"2",1)],512),s("button",{class:"thin",onClick:$},u(e(t).insert),1)]),(i(!0),p(N,null,D(y.value.components,(o,r)=>(i(),p("div",{key:r,class:"component"},[s("div",qe,[o.type==="Board"?(i(),p("span",Ve,u(e(t).board),1)):h("",!0),o.type==="Record"?(i(),p("span",Ye,u(e(t).record),1)):h("",!0),o.type==="Book"?(i(),p("span",Xe,u(e(t).book),1)):h("",!0),o.type==="Chart"?(i(),p("span",je,u(e(t).chart),1)):h("",!0),o.type==="Analytics"?(i(),p("span",Qe,u(e(t).analytics),1)):h("",!0),o.type==="Comment"?(i(),p("span",$e,u(e(t).comments),1)):h("",!0),o.type==="RecordInfo"?(i(),p("span",Je,u(e(t).recordProperties),1)):h("",!0),o.type==="ControlGroup1"?(i(),p("span",Ke,u(e(t).controlGroup)+"1",1)):h("",!0),o.type==="ControlGroup2"?(i(),p("span",Ze,u(e(t).controlGroup)+"2",1)):h("",!0)]),s("div",null,[s("span",xe,[s("span",eo,u(e(t).left)+":",1),s("input",{class:"value",type:"number",value:o.left,onInput:l=>_(r,"left",e(I)(l))},null,40,oo)]),s("span",to,[s("span",so,u(e(t).top)+":",1),s("input",{class:"value",type:"number",value:o.top,onInput:l=>_(r,"top",e(I)(l))},null,40,lo)]),s("span",ao,[s("span",ro,u(e(t).width)+":",1),s("input",{class:"value",type:"number",value:o.width,onInput:l=>_(r,"width",e(I)(l))},null,40,no)]),s("span",uo,[s("span",io,u(e(t).height)+":",1),s("input",{class:"value",type:"number",value:o.height,onInput:l=>_(r,"height",e(I)(l))},null,40,co)])]),o.type==="Board"?(i(),p("div",po,[s("span",ho,[d(C,{value:!!o.rightControlBox,label:e(t).rightControlBox,onChange:l=>_(r,"rightControlBox",l)},null,8,["value","label","onChange"])]),s("span",_o,[d(C,{value:!!o.leftControlBox,label:e(t).leftControlBox,onChange:l=>_(r,"leftControlBox",l)},null,8,["value","label","onChange"])]),s("span",null,[d(G,{value:o.layoutType||e(L).STANDARD,items:[{label:e(t).standard,value:e(L).STANDARD},{label:e(t).compact,value:e(L).COMPACT},{label:e(t).portrait,value:e(L).PORTRAIT}],onChange:l=>_(r,"layoutType",l)},null,8,["value","items","onChange"])])])):h("",!0),o.type==="Record"?(i(),p("div",fo,[s("span",Co,[d(C,{value:!!o.showCommentColumn,label:e(t).comments,onChange:l=>_(r,"showCommentColumn",l)},null,8,["value","label","onChange"])]),s("span",mo,[d(C,{value:!!o.showElapsedTimeColumn,label:e(t).elapsedTime,onChange:l=>_(r,"showElapsedTimeColumn",l)},null,8,["value","label","onChange"])]),s("span",vo,[d(C,{value:!!o.topControlBox,label:e(t).topControlBox,onChange:l=>_(r,"topControlBox",l)},null,8,["value","label","onChange"])]),s("span",yo,[d(C,{value:!!o.branches,label:e(t).branches,onChange:l=>_(r,"branches",l)},null,8,["value","label","onChange"])])])):h("",!0),o.type==="Chart"?(i(),p("div",go,[s("span",Po,[d(G,{value:o.chartType,items:[{label:e(t).rawScore,value:e(T).RAW},{label:e(t).estimatedWinRate,value:e(T).WIN_RATE}],onChange:l=>_(r,"chartType",l)},null,8,["value","items","onChange"])]),s("span",bo,[d(C,{value:!!o.showLegend,label:e(t).legends,onChange:l=>_(r,"showLegend",l)},null,8,["value","label","onChange"])])])):h("",!0),o.type==="Analytics"?(i(),p("div",ko,[s("span",wo,[d(C,{value:!!o.historyMode,label:e(t).historyMode,onChange:l=>_(r,"historyMode",l)},null,8,["value","label","onChange"])]),s("span",Lo,[d(C,{value:!!o.showHeader,label:e(t).headers,onChange:l=>_(r,"showHeader",l)},null,8,["value","label","onChange"])]),s("span",Io,[d(C,{value:!!o.showTimeColumn,label:e(t).elapsedTime,onChange:l=>_(r,"showTimeColumn",l)},null,8,["value","label","onChange"])]),s("span",Ro,[d(C,{value:!!o.showMultiPvColumn,label:e(t).rank,onChange:l=>_(r,"showMultiPvColumn",l)},null,8,["value","label","onChange"])]),s("span",To,[d(C,{value:!!o.showDepthColumn,label:e(t).depth,onChange:l=>_(r,"showDepthColumn",l)},null,8,["value","label","onChange"])]),s("span",Bo,[d(C,{value:!!o.showNodesColumn,label:e(t).nodes,onChange:l=>_(r,"showNodesColumn",l)},null,8,["value","label","onChange"])]),s("span",Uo,[d(C,{value:!!o.showScoreColumn,label:e(t).score,onChange:l=>_(r,"showScoreColumn",l)},null,8,["value","label","onChange"])]),s("span",So,[d(C,{value:!!o.showPlayButton,label:e(t).playButton,onChange:l=>_(r,"showPlayButton",l)},null,8,["value","label","onChange"])]),s("span",Ao,[d(C,{value:!!o.showSuggestionsCount,label:e(t).suggestionsCount,onChange:l=>_(r,"showSuggestionsCount",l)},null,8,["value","label","onChange"])])])):h("",!0),o.type==="Comment"?(i(),p("div",Eo,[s("span",Mo,[d(C,{value:!!o.showBookmark,label:e(t).bookmark,onChange:l=>_(r,"showBookmark",l)},null,8,["value","label","onChange"])])])):h("",!0),s("div",null,[r!==0?(i(),p("button",{key:0,class:"thin",onClick:()=>X(r)}," ↑ "+u(e(t).bringForward),9,No)):h("",!0),r!==y.value.components.length-1?(i(),p("button",{key:1,class:"thin",onClick:()=>j(r)}," ↓ "+u(e(t).sendBackward),9,Do)):h("",!0),s("button",{class:"thin",onClick:()=>Q(r)},u(e(t).remove),9,Oo)])]))),128))])):h("",!0)]),e(m).hasMessage?(i(),R(ye,{key:0})):h("",!0),e(P).hasError?(i(),R(Ce,{key:1})):h("",!0),e(E).message?(i(),R(me,{key:2})):h("",!0)],2))}}),Fo=_e(Go,[["__scopeId","data-v-e9147936"]]);g.log(S.INFO,"start renderer process (layout manager)");const Wo=F(),zo=A();Promise.allSettled([Wo.setup(),zo.loadAppSettings().catch(v=>{g.log(S.ERROR,"アプリ設定の読み込み中にエラーが発生しました: "+v)})]).finally(()=>{const v=A().language;de(v),g.log(S.INFO,"mount app (layout manager)"),fe(Fo).mount("#app")});
