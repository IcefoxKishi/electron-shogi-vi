var j=Object.defineProperty;var J=(v,d,m)=>d in v?j(v,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):v[d]=m;var w=(v,d,m)=>J(v,typeof d!="symbol"?d+"":d,m);import{bX as B,bY as K,e as Q,E as g,bZ as x,b_ as ee,b$ as oe,d as te,D as S,aA as se,a8 as le,M as re,x as ae,f as ne,o as u,g as p,i as t,v as o,l as i,t as s,F as M,m as N,j as h,bg as G,A as f,Z as C,L as I,k as ie,c0 as ue,c1 as ce,c2 as pe,a6 as R,c3 as L,ai as he,_ as _e,a9 as T,be as de,bf as fe}from"./HorizontalSelector-gZQv-0fO.js";import{c as Ce,E as me,C as ve}from"./ErrorMessage-GsRv8NzO.js";class ye{constructor(){w(this,"_reactive");w(this,"_currentProfileURI",B);w(this,"_customProfileList",K());this._reactive=Q(this)}get reactive(){return this._reactive}get currentProfileURI(){return this._currentProfileURI}get customLayoutProfiles(){return this._customProfileList.profiles}selectProfile(d){this._currentProfileURI=d,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}addCustomProfile(d){const m=x(this._customProfileList,d);this._currentProfileURI=m,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}duplicateCustomProfile(d){const m=ee(this._customProfileList,d);m&&(this._currentProfileURI=m,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList))}removeCustomProfile(d){oe(this._customProfileList,d),this._currentProfileURI=B,g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}updateCustomProfile(d,m){for(let P=0;P<this._customProfileList.profiles.length;P++)if(this._customProfileList.profiles[P].uri===d){this._customProfileList.profiles[P]=m,this._currentProfileURI=d;break}g.updateLayoutProfileList(this._currentProfileURI,this._customProfileList)}async setup(){[this._currentProfileURI,this._customProfileList]=await g.loadLayoutProfileList()}}function ge(){return new ye().reactive}let U;function F(){return U||(U=ge()),U}const Pe={class:"main full column"},be={class:"header column"},ke=["value"],we=["value"],Le=["value"],Ie={class:"row wrap buttons"},Re={key:0,class:"custom-profile column grow scroll"},Ue={class:"row"},Be=["value"],Te={class:"row"},Se=["value"],Ee={class:"row"},Ae={value:"Board"},Me={value:"Record"},Ne={value:"Chart"},Ge={value:"Analytics"},Fe={value:"Comment"},Oe={value:"RecordInfo"},De={value:"ControlGroup1"},We={value:"ControlGroup2"},ze={class:"name"},Ve={key:0},Ye={key:1},He={key:2},qe={key:3},Xe={key:4},Ze={key:5},$e={key:6},je={key:7},Je={class:"property"},Ke={class:"key"},Qe=["value","onInput"],xe={class:"property"},eo={class:"key"},oo=["value","onInput"],to={class:"property"},so={class:"key"},lo=["value","onInput"],ro={class:"property"},ao={class:"key"},no=["value","onInput"],io={key:0},uo={class:"property"},co={class:"property"},po={key:1},ho={class:"property"},_o={class:"property"},fo={class:"property"},Co={class:"property"},mo={key:2},vo={class:"property"},yo={class:"property"},go={key:3},Po={class:"property"},bo={class:"property"},ko={class:"property"},wo={class:"property"},Lo={class:"property"},Io={class:"property"},Ro={class:"property"},Uo={class:"property"},Bo={key:4},To={class:"property"},So=["onClick"],Eo=["onClick"],Ao=["onClick"],Mo=te({__name:"LayoutManager",setup(v){const d=S(),m=se(),P=le(),E=re(),c=F(),A=ae(),y=ne(()=>c.customLayoutProfiles.find(n=>n.uri===c.currentProfileURI)),O=n=>{const r=n.target;c.selectProfile(r.value)},D=()=>{c.addCustomProfile()},W=()=>{c.duplicateCustomProfile(c.currentProfileURI)},z=()=>{c.currentProfileURI.startsWith(ue)&&E.show({message:s.areYouSureWantToRemoveCurrentProfile,onOk:()=>{c.removeCustomProfile(c.currentProfileURI)}})},b=()=>c.customLayoutProfiles.find(n=>n.uri===c.currentProfileURI),V=()=>{const n=b();if(n){const r=ce(n);navigator.clipboard.writeText(r),m.enqueue({text:s.profileExportedToClipboard})}},Y=async()=>{try{const n=await navigator.clipboard.readText(),r=pe(n);c.addCustomProfile(r),m.enqueue({text:s.profileImported})}catch{P.add(new Error(s.failedToImportProfile))}},k=(n,r)=>{const e=b();e&&c.updateCustomProfile(c.currentProfileURI,{...e,[n]:r})},_=(n,r,e)=>{const a=b();a&&c.updateCustomProfile(c.currentProfileURI,{...a,components:a.components.map((l,$)=>$!==n?l:{...l,[r]:e})})},H=n=>{const r=b();if(!r||n<=0)return;const e=[...r.components],a=e[n-1];e[n-1]=e[n],e[n]=a,c.updateCustomProfile(c.currentProfileURI,{...r,components:e})},q=n=>{const r=b();if(!r||n>=r.components.length-1)return;const e=[...r.components],a=e[n+1];e[n+1]=e[n],e[n]=a,c.updateCustomProfile(c.currentProfileURI,{...r,components:e})},X=n=>{const r=b();r&&c.updateCustomProfile(c.currentProfileURI,{...r,components:r.components.filter((e,a)=>a!==n)})},Z=()=>{const n=b();if(!n)return;const r=[...n.components],e=A.value.value;switch(e){case"Board":r.unshift({type:e,left:0,top:0,width:800,height:600});break;case"Record":r.unshift({type:"Record",left:0,top:0,width:400,height:500});break;case"Chart":r.unshift({type:"Chart",left:0,top:0,width:600,height:300,chartType:R.RAW});break;case"Analytics":r.unshift({type:"Analytics",left:0,top:0,width:600,height:300});break;case"Comment":r.unshift({type:e,left:0,top:0,width:250,height:250});break;case"RecordInfo":r.unshift({type:e,left:0,top:0,width:400,height:300});break;case"ControlGroup1":case"ControlGroup2":r.unshift({type:e,left:0,top:0,width:150,height:200});break}c.updateCustomProfile(c.currentProfileURI,{...n,components:r})};return(n,r)=>(u(),p("div",{class:ie(["root full",o(d).thema])},[t("div",Pe,[t("div",be,[t("select",{value:o(c).currentProfileURI,onChange:O},[t("option",{value:B},i(o(s).standard),9,we),(u(!0),p(M,null,N(o(c).customLayoutProfiles,(e,a)=>(u(),p("option",{key:a,value:e.uri},i(e.name),9,Le))),128))],40,ke),t("div",Ie,[t("button",{class:"thin",onClick:D},i(o(s).addCustomLayoutProfile),1),y.value?(u(),p("button",{key:0,class:"thin",onClick:W},i(o(s).duplicateCurrentProfile),1)):h("",!0),y.value?(u(),p("button",{key:1,class:"thin",onClick:z},i(o(s).removeCurrentProfile),1)):h("",!0),y.value?(u(),p("button",{key:2,class:"thin",onClick:V},i(o(s).exportProfileToClipboard),1)):h("",!0),t("button",{class:"thin",onClick:Y},i(o(s).importProfileFromClipboard),1)])]),y.value?(u(),p("div",Re,[t("div",Ue,[t("input",{class:"profile-name",value:y.value.name,onInput:r[0]||(r[0]=e=>k("name",o(G)(e)))},null,40,Be)]),t("div",Te,[f(C,{class:"color-toggle",value:!!y.value.backgroundColor,label:o(s).backgroundColor,onChange:r[1]||(r[1]=e=>k("backgroundColor",e?"#000000":void 0))},null,8,["value","label"]),y.value.backgroundColor?(u(),p("input",{key:0,class:"color-selector",type:"color",value:y.value.backgroundColor,onInput:r[2]||(r[2]=e=>k("backgroundColor",o(G)(e)))},null,40,Se)):h("",!0),f(C,{class:"backdrop-toggle",value:!!y.value.dialogBackdrop,label:o(s).dialogBackdrop,onChange:r[3]||(r[3]=e=>k("dialogBackdrop",e))},null,8,["value","label"])]),t("div",Ee,[t("select",{ref_key:"newComponentType",ref:A,size:"1"},[t("option",Ae,i(o(s).board),1),t("option",Me,i(o(s).record),1),t("option",Ne,i(o(s).chart),1),t("option",Ge,i(o(s).analytics),1),t("option",Fe,i(o(s).comments),1),t("option",Oe,i(o(s).recordProperties),1),t("option",De,i(o(s).controlGroup)+"1",1),t("option",We,i(o(s).controlGroup)+"2",1)],512),t("button",{class:"thin",onClick:Z},i(o(s).insert),1)]),(u(!0),p(M,null,N(y.value.components,(e,a)=>(u(),p("div",{key:a,class:"component"},[t("div",ze,[e.type==="Board"?(u(),p("span",Ve,i(o(s).board),1)):h("",!0),e.type==="Record"?(u(),p("span",Ye,i(o(s).record),1)):h("",!0),e.type==="Chart"?(u(),p("span",He,i(o(s).chart),1)):h("",!0),e.type==="Analytics"?(u(),p("span",qe,i(o(s).analytics),1)):h("",!0),e.type==="Comment"?(u(),p("span",Xe,i(o(s).comments),1)):h("",!0),e.type==="RecordInfo"?(u(),p("span",Ze,i(o(s).recordProperties),1)):h("",!0),e.type==="ControlGroup1"?(u(),p("span",$e,i(o(s).controlGroup)+"1",1)):h("",!0),e.type==="ControlGroup2"?(u(),p("span",je,i(o(s).controlGroup)+"2",1)):h("",!0)]),t("div",null,[t("span",Je,[t("span",Ke,i(o(s).left)+":",1),t("input",{class:"value",type:"number",value:e.left,onInput:l=>_(a,"left",o(L)(l))},null,40,Qe)]),t("span",xe,[t("span",eo,i(o(s).top)+":",1),t("input",{class:"value",type:"number",value:e.top,onInput:l=>_(a,"top",o(L)(l))},null,40,oo)]),t("span",to,[t("span",so,i(o(s).width)+":",1),t("input",{class:"value",type:"number",value:e.width,onInput:l=>_(a,"width",o(L)(l))},null,40,lo)]),t("span",ro,[t("span",ao,i(o(s).height)+":",1),t("input",{class:"value",type:"number",value:e.height,onInput:l=>_(a,"height",o(L)(l))},null,40,no)])]),e.type==="Board"?(u(),p("div",io,[t("span",uo,[f(C,{value:!!e.rightControlBox,label:o(s).rightControlBox,onChange:l=>_(a,"rightControlBox",l)},null,8,["value","label","onChange"])]),t("span",co,[f(C,{value:!!e.leftControlBox,label:o(s).leftControlBox,onChange:l=>_(a,"leftControlBox",l)},null,8,["value","label","onChange"])])])):h("",!0),e.type==="Record"?(u(),p("div",po,[t("span",ho,[f(C,{value:!!e.showCommentColumn,label:o(s).comments,onChange:l=>_(a,"showCommentColumn",l)},null,8,["value","label","onChange"])]),t("span",_o,[f(C,{value:!!e.showElapsedTimeColumn,label:o(s).elapsedTime,onChange:l=>_(a,"showElapsedTimeColumn",l)},null,8,["value","label","onChange"])]),t("span",fo,[f(C,{value:!!e.topControlBox,label:o(s).topControlBox,onChange:l=>_(a,"topControlBox",l)},null,8,["value","label","onChange"])]),t("span",Co,[f(C,{value:!!e.branches,label:o(s).branches,onChange:l=>_(a,"branches",l)},null,8,["value","label","onChange"])])])):h("",!0),e.type==="Chart"?(u(),p("div",mo,[t("span",vo,[f(he,{value:e.chartType,items:[{label:o(s).eval,value:o(R).RAW},{label:o(s).estimatedWinRate,value:o(R).WIN_RATE}],onChange:l=>_(a,"chartType",l)},null,8,["value","items","onChange"])]),t("span",yo,[f(C,{value:!!e.showLegend,label:o(s).legends,onChange:l=>_(a,"showLegend",l)},null,8,["value","label","onChange"])])])):h("",!0),e.type==="Analytics"?(u(),p("div",go,[t("span",Po,[f(C,{value:!!e.historyMode,label:o(s).historyMode,onChange:l=>_(a,"historyMode",l)},null,8,["value","label","onChange"])]),t("span",bo,[f(C,{value:!!e.showHeader,label:o(s).headers,onChange:l=>_(a,"showHeader",l)},null,8,["value","label","onChange"])]),t("span",ko,[f(C,{value:!!e.showTimeColumn,label:o(s).elapsedTime,onChange:l=>_(a,"showTimeColumn",l)},null,8,["value","label","onChange"])]),t("span",wo,[f(C,{value:!!e.showMultiPvColumn,label:o(s).multiPV,onChange:l=>_(a,"showMultiPvColumn",l)},null,8,["value","label","onChange"])]),t("span",Lo,[f(C,{value:!!e.showDepthColumn,label:o(s).depth,onChange:l=>_(a,"showDepthColumn",l)},null,8,["value","label","onChange"])]),t("span",Io,[f(C,{value:!!e.showNodesColumn,label:o(s).nodes,onChange:l=>_(a,"showNodesColumn",l)},null,8,["value","label","onChange"])]),t("span",Ro,[f(C,{value:!!e.showScoreColumn,label:o(s).eval,onChange:l=>_(a,"showScoreColumn",l)},null,8,["value","label","onChange"])]),t("span",Uo,[f(C,{value:!!e.showPlayButton,label:o(s).playButton,onChange:l=>_(a,"showPlayButton",l)},null,8,["value","label","onChange"])])])):h("",!0),e.type==="Comment"?(u(),p("div",Bo,[t("span",To,[f(C,{value:!!e.showBookmark,label:o(s).bookmark,onChange:l=>_(a,"showBookmark",l)},null,8,["value","label","onChange"])])])):h("",!0),t("div",null,[a!==0?(u(),p("button",{key:0,class:"thin",onClick:()=>H(a)}," ↑ "+i(o(s).bringForward),9,So)):h("",!0),a!==y.value.components.length-1?(u(),p("button",{key:1,class:"thin",onClick:()=>q(a)}," ↓ "+i(o(s).sendBackward),9,Eo)):h("",!0),t("button",{class:"thin",onClick:()=>X(a)},i(o(s).remove),9,Ao)])]))),128))])):h("",!0)]),o(m).hasMessage?(u(),I(Ce,{key:0})):h("",!0),o(P).hasError?(u(),I(me,{key:1})):h("",!0),o(E).message?(u(),I(ve,{key:2})):h("",!0)],2))}}),No=_e(Mo,[["__scopeId","data-v-4ff3fe11"]]);g.log(T.INFO,"start renderer process (layout manager)");const Go=F(),Fo=S();Promise.allSettled([Go.setup(),Fo.loadAppSettings().catch(v=>{g.log(T.ERROR,"アプリ設定の読み込み中にエラーが発生しました: "+v)})]).finally(()=>{const v=S().language;de(v),g.log(T.INFO,"mount app (layout manager)"),fe(No).mount("#app")});
